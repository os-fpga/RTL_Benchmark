export PATH := $(NDS_HOME)/tools/bin:$(NDS_TOOLCHAIN):$(PATH)

VERDI_LIB =  $(VERDI_HOME)/share/PLI/VCS/linux
VERDI_SETUP1 = -debug_access  -debug_region=lib
VERDI_SETUP2 = -P $(VERDI_LIB)/novas.tab  $(VERDI_LIB)/pli.a

#DUMP_TRN = +define+DUMP+TRN +access+rc
#DUMP_FSDB = +define+DUMP+FSDB $(VERDI_SETUP1)
VPLUSDEFINES = $(DUMP_TRN) $(DUMP_FSDB)

#-----------------------------------------#
RISCV_PREFIX ?= riscv32-elf-
CC           = $(RISCV_PREFIX)gcc
LD           = $(RISCV_PREFIX)ld

LDFLAGS = -T$$NDS_HOME/andes_vip/patterns/riscv-tests/env/p/link.ld
CFLAGS = -c -I$$NDS_HOME/andes_vip/patterns/riscv-tests/env/p -I$$NDS_HOME/andes_vip/patterns/riscv-tests/isa/macros/scalar -I$$NDS_HOME/andes_vip/patterns/riscv-tests/isa/macros

#-----------------------------------------#
# Simulator
VERILOG      = xrun
# VERILOG      = vcs

ifeq ($(VERILOG), xrun)
SIMULATION_COMMAND	= xrun -l verilog.log -exit -licqueue +nowarn+CUVWSP +nowarn+LIBNOU +nowarn+SPDUSD $(VPLUSDEFINES)
else
ifeq ($(VERILOG), vcs)
SIMULATION_COMMAND	= vcs -l verilog.log -lca -v2005 -R -sverilog +v2k +systemverilogext+sv -LDFLAGS -Wl,-E +vcs+lic+wait $(VPLUSDEFINES)
else
ifeq ($(VERILOG), qverilog)
SIMULATION_COMMAND = qverilog -l verilog.log -nodebug $(VPLUSDEFINES)
else
$(error the VERILOG variable defines an unknown Verilog simulator. Valid values are xrun, vcs and qverilog)
endif
endif
endif

